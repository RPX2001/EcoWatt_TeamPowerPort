 *  Executing task: platformio device monitor 

--- Terminal on /dev/cu.usbserial-0001 | 115200 8-N-1
--- Available filters and text transformations: colorize, debug, default, direct, esp32_exception_decoder, hexlify, log2file, nocontrol, printable, send_on_enter, time
--- More details at https://bit.ly/pio-monitor-filters
--- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
Connected!
WiFi power save disabled for stability

╔════════════════════════════════════════════════════════════╗
║  POWER MANAGEMENT INITIALIZATION                           ║
╚════════════════════════════════════════════════════════════╝
  [INFO] Power management strategy:
  [INFO]   CPU Frequency: Fixed 240 MHz (WiFi requirement)
  [INFO]   WiFi always active (polling/upload requirements)
  [INFO]   Alternative optimizations:
  [INFO]     - Modem sleep between operations
  [INFO]     - Peripheral gating (future)
  [INFO]     - Code optimization for efficiency
  [OK] Power management initialized (WiFi-safe mode)

╔════════════════════════════════════════════════════════════╗
║  PERIPHERAL POWER GATING INITIALIZATION                    ║
╚════════════════════════════════════════════════════════════╝
  [INFO] UART power gating: Enabled
  [INFO] UART will be powered only during Modbus polls
  [OK] Peripheral power management initialized
Initializing Security Layer...
Security Layer: Initializing...
Security Layer: Initialized with nonce = 10193
Initializing OTA Manager...
=== OTA Manager Initialization ===
No previous OTA progress found
Device ID: ESP32_EcoWatt_Smart
Current Version: 1.0.3
Server URL: http://192.168.1.141:5001:5001
Decryption buffer: 2048 bytes allocated
OTA Manager initialized successfully
=====================================
=== HANDLING FIRMWARE ROLLBACK ===
Rollback handling complete
[  1348][W][esp32-hal-timer.c:226] timerAttachInterruptFlag(): EDGE timer interrupt is not supported! Setting to LEVEL...
OTA timer configured (6-hour interval)
[  1367][W][esp32-hal-timer.c:226] timerAttachInterruptFlag(): EDGE timer interrupt is not supported! Setting to LEVEL...
[  1378][W][esp32-hal-timer.c:226] timerAttachInterruptFlag(): EDGE timer interrupt is not supported! Setting to LEVEL...
[  1389][W][esp32-hal-timer.c:226] timerAttachInterruptFlag(): EDGE timer interrupt is not supported! Setting to LEVEL...
ESP32 MEMORY STATUS
Free Heap: 235068 bytes
Heap Size: 311236 bytes
Max Alloc: 110580 bytes
PSRAM Free: 0 bytes
Flash Size: 4194304 bytes
==========================
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted
  [PGATE] UART Enabled (count: 1)
Attempt 1: Sending {"frame": "11030000000AC75D"}

Received frame: 11031409040000138F066A066300000000016100320000BAAD
Valid Modbus frame.
Polled values: Vac1=2308 Iac1=0 Fac1=5007 Vpv1=1642 Vpv2=1635 Ipv1=0 Ipv2=0 Temp=353 Pow=50 Pac=0 
  [PGATE] UART Disabled (count: 1, duty: 9.80%)
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted

╔════════════════════════════════════════════════════════════╗
║  COMMAND POLL CYCLE                                        ║
╚════════════════════════════════════════════════════════════╝
  [....] Polling server for pending commands...
  [INFO] No pending commands in queue
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted
  [PGATE] UART Enabled (count: 2)
Attempt 1: Sending {"frame": "11030000000AC75D"}

Received frame: 11031409040000138F066A066300000000016100320000BAAD
Valid Modbus frame.
Polled values: Vac1=2308 Iac1=0 Fac1=5007 Vpv1=1642 Vpv2=1635 Ipv1=0 Ipv2=0 Temp=353 Pow=50 Pac=0 
  [PGATE] UART Disabled (count: 2, duty: 10.09%)
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted

╔════════════════════════════════════════════════════════════╗
║  COMMAND POLL CYCLE                                        ║
╚════════════════════════════════════════════════════════════╝
  [....] Polling server for pending commands...
  [INFO] No pending commands in queue
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted
  [PGATE] UART Enabled (count: 3)
Attempt 1: Sending {"frame": "11030000000AC75D"}

Received frame: 11031409040000138F066A066300000000016100320000BAAD
Valid Modbus frame.
Polled values: Vac1=2308 Iac1=0 Fac1=5007 Vpv1=1642 Vpv2=1635 Ipv1=0 Ipv2=0 Temp=353 Pow=50 Pac=0 
  [PGATE] UART Disabled (count: 3, duty: 10.08%)
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted

╔════════════════════════════════════════════════════════════╗
║  COMMAND POLL CYCLE                                        ║
╚════════════════════════════════════════════════════════════╝
  [....] Polling server for pending commands...
  [INFO] No pending commands in queue
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted
  [PGATE] UART Enabled (count: 4)
Attempt 1: Sending {"frame": "11030000000AC75D"}

Received frame: 11031409040000138F066A066300000000016100320000BAAD
Valid Modbus frame.
Polled values: Vac1=2308 Iac1=0 Fac1=5007 Vpv1=1642 Vpv2=1635 Ipv1=0 Ipv2=0 Temp=353 Pow=50 Pac=0 
  [PGATE] UART Disabled (count: 4, duty: 10.16%)
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted

╔════════════════════════════════════════════════════════════╗
║  COMMAND POLL CYCLE                                        ║
╚════════════════════════════════════════════════════════════╝
  [....] Polling server for pending commands...
  [INFO] No pending commands in queue
  [PGATE] UART Enabled (count: 5)
Attempt 1: Sending {"frame": "11030000000AC75D"}

Received frame: 11031409040000138F066A066300000000016100320000BAAD
Valid Modbus frame.
Polled values: Vac1=2308 Iac1=0 Fac1=5007 Vpv1=1642 Vpv2=1635 Ipv1=0 Ipv2=0 Temp=353 Pow=50 Pac=0 
  [PGATE] UART Disabled (count: 5, duty: 10.19%)
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted

╔════════════════════════════════════════════════════════════╗
║  COMMAND POLL CYCLE                                        ║
╚════════════════════════════════════════════════════════════╝
  [....] Polling server for pending commands...
  [INFO] No pending commands in queue
  [PGATE] UART Enabled (count: 6)
Attempt 1: Sending {"frame": "11030000000AC75D"}

Received frame: 11031409040000138F066A066300000000016100320000BAAD
Valid Modbus frame.
Polled values: Vac1=2308 Iac1=0 Fac1=5007 Vpv1=1642 Vpv2=1635 Ipv1=0 Ipv2=0 Temp=353 Pow=50 Pac=0 
  [PGATE] UART Disabled (count: 6, duty: 10.26%)
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted
=== OTA UPDATE CHECK INITIATED ===

=== CHECKING FOR FIRMWARE UPDATES ===
Checking updates for device: ESP32_EcoWatt_Smart
Current version: 1.0.3
POST /ota/check
Payload: {"device_id":"ESP32_EcoWatt_Smart","current_version":"1.0.3"}
Response (200): {
  "message": "No firmware versions available",
  "update_available": false
}

No firmware updates available
Device is already running the latest version: 1.0.3
No firmware updates available
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted

╔════════════════════════════════════════════════════════════╗
║  COMMAND POLL CYCLE                                        ║
╚════════════════════════════════════════════════════════════╝
  [....] Polling server for pending commands...
  [INFO] No pending commands in queue
  [PGATE] UART Enabled (count: 7)
Attempt 1: Sending {"frame": "11030000000AC75D"}

Received frame: 11031409040000138F066A066300000000016100320000BAAD
Valid Modbus frame.
Polled values: Vac1=2308 Iac1=0 Fac1=5007 Vpv1=1642 Vpv2=1635 Ipv1=0 Ipv2=0 Temp=353 Pow=50 Pac=0 
COMPRESSION RESULT: SEMANTIC method
Original: 140 bytes -> Compressed: 105 bytes (25.0% savings)
Academic Ratio: 0.750 | Time: 4393 μs
Batch compressed and stored successfully!
  [PGATE] UART Disabled (count: 7, duty: 10.32%)
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted

╔════════════════════════════════════════════════════════════╗
║  DATA UPLOAD CYCLE                                         ║
╚════════════════════════════════════════════════════════════╝
  [INFO] Preparing 1 compressed batches for upload
  [INFO] Compression: 20 bytes -> 105 bytes (-425.0% savings)
  [INFO] Sending 1 packets with 10 registers
  [....] Encrypting payload with AES-128...
Security Layer: Payload secured with nonce 10194 (size: 1511 bytes)
  [OK] Payload encrypted successfully
  [....] Uploading to server...
  [OK] Upload successful! (HTTP 200)
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted

╔════════════════════════════════════════════════════════════╗
║  COMMAND POLL CYCLE                                        ║
╚════════════════════════════════════════════════════════════╝
  [....] Polling server for pending commands...
  [INFO] No pending commands in queue
  [PGATE] UART Enabled (count: 8)
Attempt 1: Sending {"frame": "11030000000AC75D"}

Received frame: 11031409040000138F066A066300000000016100320000BAAD
Valid Modbus frame.
Polled values: Vac1=2308 Iac1=0 Fac1=5007 Vpv1=1642 Vpv2=1635 Ipv1=0 Ipv2=0 Temp=353 Pow=50 Pac=0 
  [PGATE] UART Disabled (count: 8, duty: 10.35%)
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted

╔════════════════════════════════════════════════════════════╗
║  COMMAND POLL CYCLE                                        ║
╚════════════════════════════════════════════════════════════╝
  [....] Polling server for pending commands...
  [INFO] No pending commands in queue
  [PGATE] UART Enabled (count: 9)
Attempt 1: Sending {"frame": "11030000000AC75D"}

Received frame: 11031409040000138F066A066300000000016100320000BAAD
Valid Modbus frame.
Polled values: Vac1=2308 Iac1=0 Fac1=5007 Vpv1=1642 Vpv2=1635 Ipv1=0 Ipv2=0 Temp=353 Pow=50 Pac=0 
  [PGATE] UART Disabled (count: 9, duty: 10.34%)
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted
  [PGATE] UART Enabled (count: 10)
Attempt 1: Sending {"frame": "11030000000AC75D"}

Received frame: 11031409040000138F066A066300000000016100320000BAAD
Valid Modbus frame.
Polled values: Vac1=2308 Iac1=0 Fac1=5007 Vpv1=1642 Vpv2=1635 Ipv1=0 Ipv2=0 Temp=353 Pow=50 Pac=0 
  [PGATE] UART Disabled (count: 10, duty: 10.41%)
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted

╔════════════════════════════════════════════════════════════╗
║  COMMAND POLL CYCLE                                        ║
╚════════════════════════════════════════════════════════════╝
  [....] Polling server for pending commands...
  [INFO] No pending commands in queue
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted
  [PGATE] UART Enabled (count: 11)
Attempt 1: Sending {"frame": "11030000000AC75D"}

Received frame: 11031409040000138F066A066300000000016100320000BAAD
Valid Modbus frame.
Polled values: Vac1=2308 Iac1=0 Fac1=5007 Vpv1=1642 Vpv2=1635 Ipv1=0 Ipv2=0 Temp=353 Pow=50 Pac=0 
  [PGATE] UART Disabled (count: 11, duty: 10.41%)
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted

╔════════════════════════════════════════════════════════════╗
║  COMMAND POLL CYCLE                                        ║
╚════════════════════════════════════════════════════════════╝
  [....] Polling server for pending commands...
  [INFO] No pending commands in queue
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted
  [PGATE] UART Enabled (count: 12)
Attempt 1: Sending {"frame": "11030000000AC75D"}

Received frame: 11031409040000138F066A066300000000016100320000BAAD
Valid Modbus frame.
Polled values: Vac1=2308 Iac1=0 Fac1=5007 Vpv1=1642 Vpv2=1635 Ipv1=0 Ipv2=0 Temp=353 Pow=50 Pac=0 
  [PGATE] UART Disabled (count: 12, duty: 10.42%)
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted

╔════════════════════════════════════════════════════════════╗
║  COMMAND POLL CYCLE                                        ║
╚════════════════════════════════════════════════════════════╝
  [....] Polling server for pending commands...
  [INFO] No pending commands in queue
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted
  [PGATE] UART Enabled (count: 13)
Attempt 1: Sending {"frame": "11030000000AC75D"}

Received frame: 11031409040000138F066A066300000000016100320000BAAD
Valid Modbus frame.
Polled values: Vac1=2308 Iac1=0 Fac1=5007 Vpv1=1642 Vpv2=1635 Ipv1=0 Ipv2=0 Temp=353 Pow=50 Pac=0 
  [PGATE] UART Disabled (count: 13, duty: 10.39%)
=== OTA UPDATE CHECK INITIATED ===

=== CHECKING FOR FIRMWARE UPDATES ===
Checking updates for device: ESP32_EcoWatt_Smart
Current version: 1.0.3
POST /ota/check
Payload: {"device_id":"ESP32_EcoWatt_Smart","current_version":"1.0.3"}
Response (200): {
  "message": "No firmware versions available",
  "update_available": false
}

No firmware updates available
Device is already running the latest version: 1.0.3
No firmware updates available
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted

╔════════════════════════════════════════════════════════════╗
║  COMMAND POLL CYCLE                                        ║
╚════════════════════════════════════════════════════════════╝
  [....] Polling server for pending commands...
  [INFO] No pending commands in queue
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted
  [PGATE] UART Enabled (count: 14)
Attempt 1: Sending {"frame": "11030000000AC75D"}

Received frame: 11031409040000138F066A066300000000016100320000BAAD
Valid Modbus frame.
Polled values: Vac1=2308 Iac1=0 Fac1=5007 Vpv1=1642 Vpv2=1635 Ipv1=0 Ipv2=0 Temp=353 Pow=50 Pac=0 
COMPRESSION RESULT: DICTIONARY method
Original: 140 bytes -> Compressed: 5 bytes (96.4% savings)
Academic Ratio: 0.036 | Time: 4218 μs
Batch compressed and stored successfully!
  [PGATE] UART Disabled (count: 14, duty: 10.43%)
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted

╔════════════════════════════════════════════════════════════╗
║  COMMAND POLL CYCLE                                        ║
╚════════════════════════════════════════════════════════════╝
  [....] Polling server for pending commands...
  [INFO] No pending commands in queue

╔════════════════════════════════════════════════════════════╗
║  DATA UPLOAD CYCLE                                         ║
╚════════════════════════════════════════════════════════════╝
  [INFO] Preparing 1 compressed batches for upload
  [INFO] Compression: 20 bytes -> 5 bytes (75.0% savings)
  [INFO] Sending 1 packets with 10 registers
  [....] Encrypting payload with AES-128...
Security Layer: Payload secured with nonce 10195 (size: 1343 bytes)
  [OK] Payload encrypted successfully
  [....] Uploading to server...
  [OK] Upload successful! (HTTP 200)
  [PGATE] UART Enabled (count: 15)
Attempt 1: Sending {"frame": "11030000000AC75D"}

Received frame: 11031409040000138F066A066300000000016100320000BAAD
Valid Modbus frame.
Polled values: Vac1=2308 Iac1=0 Fac1=5007 Vpv1=1642 Vpv2=1635 Ipv1=0 Ipv2=0 Temp=353 Pow=50 Pac=0 
  [PGATE] UART Disabled (count: 15, duty: 10.44%)
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted
Checking for changes from cloud...
ChangedResponse:{"Changed": false, "pollFreqChanged": false, "newPollTimer": 0, "uploadFreqChanged": false, "newUploadTimer": 0, "regsChanged": false, "regsCount": 0, "regs": 0}Changes noted

╔════════════════════════════════════════════════════════════╗
║  COMMAND POLL CYCLE                                        ║
╚════════════════════════════════════════════════════════════╝
  [....] Polling server for pending commands...
  [INFO] No pending commands in queue